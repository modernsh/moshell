use std::assert::*

struct Counter {
    value: Int
}

impl Counter {
    fun increment(self) = $self.increment(1)
    fun increment(self, value: Int) = $self.value += $value

    fun decrement(self) = $self.decrement(1)
    fun decrement(self, value: Int) = $self.value -= $value

    fun get_value(self) -> Int = $self.value

    fun apply(self) -> Int = $self(0)
    fun apply(self, i: Int) -> Int = $self.value + $i
}

val counter = Counter(0)

$counter.increment()

echo counter is now : $counter.getValue()

$counter.increment(10)

while ($counter.getValue() != 0) {
    $counter.decrement(1)
}

assert_msg($counter.getValue() == 1, "counter is not equal to 1 !")
